# 汇编语言

# 第一章 基础知识
## 1.1 机器语言
* 机器语言：机器指令的集合
* 机器指令：机器执行的命令
* 电子计算机的机器指令：二进制数，驱动电子器件的高低电平
* 不同微处理器的硬件设计和内部结构不同，需要不同的电平脉冲驱动
* 每一种微处理器有自己的机器指令集，即机器语言
## 1.2 汇编语言的产生
- 汇编语言的核心是汇编指令
- 汇编指令是机器指令便于记忆的书写格式
- 汇编编译器：汇编码 ==> 编译 ==> 机器码
## 1.3 汇编语言的组成
- 汇编指令：机器码的助记符，有对应的机器码
- 伪指令：没有对应的机器码，编译器执行，计算机不执行
- 其他符号：+, -, *, / 等，编译器识别，没有对应的机器码

## 1.4 存储器
## 1.5 指令和数据
- CPU的工作需要指令和数据
- 指令和数据存放于存储器中
- 存储器中指令和数据没有区别，均为二进制信息

## 1.6 存储单元
- 存储器被划分为若干存储单元，从0开始顺序编号
- 微机存储器的存储单元为字节，即8个二进制位
- 字节是存储器容量的最小单位
- 1KB = 1024B, 1MB = 1024KB, 1GB = 1024MB, 1TB = 1024GB
## 1.7 CPU对存储器的读写
- CPU读写数据必须与外部器件（芯片）进行3类信息的交互
    - 地址信息：存储单元的地址
    - 控制信息：器件的选择，读或写的命令
    - 数据信息：读或写的数据
- 总线 = 地址总线 + 控制总线 + 数据总线
- CPU芯片的管脚和总线相连，管脚引出总线
## 1.8 地址总线
- 地址总线的宽度决定CPU的寻址能力
- CPU有N根地址线 ==> CPU的地址总线宽度为N ==> CPU最多寻址2^N个内存单元
## 1.9 数据总线
- 数据总线的宽度决定CPU与外界的数据传输速度
## 1.10 控制总线
- 控制总线是不同控制线的集合
- 控制总线的宽度决定CPU对外部器件的控制能力
## 1.11 内存地址空间
- CPU可寻址到的所有内存单元构成CPU的内存地址空间
## 1.12 主板
## 1.13 接口卡
- CPU不能直接控制外部设备
- CPU通过总线直接控制接口卡，间接控制外部设备
## 1.14 存储器
- RAM
- 装有BIOS(Basic Input/Ouput System, 基本输入/输出系统)的ROM
- 接口卡上的RAM, BIOS ROM
## 1.15 内存地址空间
- CPU将若干存储器当作一个逻辑存储器操作 ==> 内存地址空间，逻辑地址
- 每个物理存储器占有逻辑存储器的一个地址段，即一段地址空间
- 主存地址空间，显存地址空间，系统BIOS ROM地址空间，网卡BIOS ROM地址空间……
- 地址映射：逻辑地址 ==> 物理地址
- 地址映射由MMU(Memory Management Unit, 内存管理单元)负责

# 寄存器
- CPU = 运算器 + 控制器 + 寄存器
- 运算器：信息处理
- 寄存器：信息存储
- 控制器：控制各器件工作
- 内部总线：连接CPU内部各设备，传输数据
- 8086CPU所有寄存器均为16位
- 8086CPU的14个寄存器：AX, BX, CX, DX, SI, DI, SP, BP, IP, CS, SS, DS, ES, PSW
## 2.1 通用寄存器
- AX, BX, CX, DX
- 用于存放一般性的数据
- 每个寄存器可分为两个独立的8位寄存器（兼容）
    - AX = AH + AL
    - BX = BH + BL
    - CX = CH + CL
    - DX = DH + DL
- L = low byte, H = high byte
## 2.2 字在寄存器中的存储
- 8086CPU可以一次处理两种尺寸的数据
    - 字节: byte, 由8位组成，存放于8位寄存器
    - 字: word, 由两个字节组成，高位字节、低位字节，存放于16位寄存器
- 十六进制数的一位相当于二进制数的四位
- 八进制数的一位相当于二进制数的三位
- 2^n进制数的一位相当于二进制数的n位
- 两位十六进制数相当于一个字节
# 2.3 几条汇编指令
- 进位值的丢失指进位值不能在寄存器中保存，但CPU并未真的丢失进位值
- 数据传送或运算时指令的两个操作数的位数应当一致
# 2.4 物理地址
- 物理地址：内存单元在CPU的一维线性存储空间中的唯一地址
- CPU通过地址总线向存储器传输内存单元的物理地址
- CPU内部可以有不同的方式形成内存单元的物理地址
# 2.5 16位结构的CPU
- 16位机，16位结构，字长位16位CPU的性质
    - 运算器一次最多可以处理16位数据
    - 寄存器的最大宽度为16位
    - 寄存器和运算器之间的通路为16位
- 16位CPU内部能单次处理、传输、暂时存储的信息最大长度为16位
# 8086CPU给出物理地址的方法
- 8086CPU有20根地址总线，1M寻址能力
- 8086CPU为16位结构，内部一次性处理、传输、暂存的地址为16位
- 16根地址总线的寻址能力为64K
- 8086CPU在内部用两个16为地址合成一个20位物理地址
- 地址加法器：物理地址(20 bit) = 段地址(16 bit) * 16 + 偏移地址(16 bit)
- 段地址 * 16 == 段地址左移4位(二进制位) == 段地址左移1位(十六进制位)
- n进制数左移m位，相当于乘以n^m
# 2.7 “段地址*16+偏移地址=物理地址”的本质含义
- 寻址模式：基础地址 + 偏移地址 = 物理地址
# 2.8 段的概念
- 内存本身没有分段
- CPU将内存分段，用分段的方式管理内存
- 段地址不连续，段的大小不是4位，偏移地址不是4位
- 段的起始地址一定是16的倍数（十六进制表示最低位一定是0）
- 段的大小最大为64K
- CPU可以用不同的段地址和偏移地址形成同一个物理地址
- 给定段地址，偏移地址为16位，变换范围0~FFFFH，最多寻址64K个内存单元
# 2.9 段寄存器
- 8086CPU有4个段寄存器: CS, DS, SS, ES
- segmentation
# 2.10 CS和IP
- CS: 代码段寄存器
- IP: 指令指针寄存器
- 8086CPU将CS:IP指向的信息当作指令执行
- 8086CPU启动或复位时，设置CS=FFFFH, IP=0000H
- CS:IP用于区分指令和数据
# 2.11 修改CS, IP的指令
- mov: 传送指令，不能修改CS, IP
- jmp: 转移指令，能修改CS, IP
- jmp 段地址:偏移地址
- jmp 寄存器：用寄存器的值修改IP
# 2.12 代码段
- 编程时可以根据需要将一组连续内存单元定义为一个段
- 
