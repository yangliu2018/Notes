# 计算机组成与设计 硬件/软件接口
# Computer Organization and Design 
## The Hardware/Software Interface Fifth Edition
---


<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [计算机组成与设计 硬件/软件接口](#计算机组成与设计-硬件软件接口)
- [Computer Organization and Design](#computer-organization-and-design)
  - [The Hardware/Software Interface Fifth Edition](#the-hardwaresoftware-interface-fifth-edition)
- [第1章 计算机概要技术](#第1章-计算机概要技术)
- [第2章 指令：计算机的语言](#第2章-指令计算机的语言)
- [第3章 计算机的算术运算](#第3章-计算机的算术运算)
  - [3.2 加法和减法](#32-加法和减法)
  - [3.3 乘法](#33-乘法)
  - [3.4 除法](#34-除法)
- [第4章 处理器](#第4章-处理器)
  - [4.3 建立数据通路](#43-建立数据通路)
  - [4.5 流水线概述](#45-流水线概述)
    - [4.5.2 流水线冒险](#452-流水线冒险)
  - [4.7 数据冒险：旁路与阻塞](#47-数据冒险旁路与阻塞)
  - [4.9 异常](#49-异常)
  - [4.10 指令级并行](#410-指令级并行)
  - [4.12 运行更快：指令级并行和矩阵乘法](#412-运行更快指令级并行和矩阵乘法)
- [第5章 大容量和高速度：开发存储器层次结构](#第5章-大容量和高速度开发存储器层次结构)
  - [5.14 运行更快：cache分块和矩阵乘法](#514-运行更快cache分块和矩阵乘法)
  - [5.15 谬误和陷阱](#515-谬误和陷阱)
  - [5.16 本章小结](#516-本章小结)
- [第6章 从客户端到云的并行处理器](#第6章-从客户端到云的并行处理器)

<!-- /code_chunk_output -->


# 第1章 计算机概要技术
硬件/软件接口

- 并行编程：调度、负载平衡、通信及同步等开销
- 计算机系统结构中的8个伟大思想
    - 面向摩尔定律的设计(Moore's Law)
    - 使用抽象简化设计(abstraction)
    - 加速大概率事件(common case fast)
    - 通过并行提高性能(parallel performance)
    - 通过流水线提高性能(pipelining)
    - 通过预测提高性能(prediction)
    - 存储器层次(hierarchy of memory)
    - 通过冗余提高可靠性(dependable)
- 指令集体系结构(instruction set architecture)
    - 硬件和底层软件之间的接口
    - 抽象
    - 简称体系结构，计算机体系结构
- 体系结构的实现：遵循体系结构的抽象的硬件
- 硬件/软件接口
    - 并行性
# 第2章 指令：计算机的语言

# 第3章 计算机的算术运算

## 3.2 加法和减法

## 3.3 乘法
- 32位乘法器
    - 64位ALU乘法器，用32位寄存器存储乘数
    - 32位ALU乘法器，用64位乘积的有半部分存储乘数
    - 32个加法器级联
    - 5层加法器并行
    - 使用进位保留加法器

## 3.4 除法


# 第4章 处理器

## 4.3 建立数据通路

## 4.5 流水线概述

### 4.5.2 流水线冒险
- 冒险(hazard)：在下一个时钟周期中下一条指令不能执行
- 结构冒险：硬件不支持多条指令在同一时钟周期执行
- 数据冒险：一条指令必须等待另一条指令完成
- 控制冒险：决策依赖于一条指令的结果

## 4.7 数据冒险：旁路与阻塞

## 4.9 异常


## 4.10 指令级并行


## 4.12 运行更快：指令级并行和矩阵乘法


# 第5章 大容量和高速度：开发存储器层次结构
- 虚拟存储器的写机制
    - 写直达机制：修改后立即写入磁盘
    - 写回机制：对存储器中的页进行单独的写操作，在该页被替换出存储器时再被复制到磁盘中
        - 磁盘访问时间远大于磁盘数据传输时间，整页复制比单个字写回高效

## 5.14 运行更快：cache分块和矩阵乘法

## 5.15 谬误和陷阱
- 谬误：在写程序或编译器生成代码时忽略存储系统的行为
    - cache分块技术：设计算法时考虑存储器的行为，性能可以轻易翻倍
- 陷阱：模拟cache时，忘记说明字节编址或cache块大小
    - 字节地址 ！= 字地址


## 5.16 本章小结
- 局部性原理：克服存储器访问的长延迟
    - 多级cache
    - 软件
        - 重新组织程序结构增强时间和空间局部性：大数组和循环，线性代数
        - 预取(prefetching): 使用特殊指令将未来可能用到的数据块搬入cache
    - 优化存储器传输的特殊cache感知指令(cache-aware)


# 第6章 从客户端到云的并行处理器
- 单处理器 (uniprocessor)
- 多处理器 (multiprocessor)
- 任务级并行 (task-level parallelism) / 进程级并行 (processor-level parallelism)：分别同时运行在多个处理器上的多个程序
- 并行处理程序 (parallel processing program)：同时运行在多个处理器上的单一程序
- 集群 (cluster): 通过局域网连接的一组计算机，等价于单个大型的多处理器
- 多核微处理器 (multicore microprocessor): 不称为多处理器微处理器
- 共享内存处理器 (shared memory processor, SMP): 共享单个物理地址空间的并行处理器
- 硬件：串行 (serial)，并行 (parallel)
- 软件：顺序 (sequential)，并发 (concurrent)

## 6.2 创建并行处理程序的难点
- 必须使用并行处理程序才能在多处理器上获取更高性能或功耗利用率
- 并行编程的挑战：调度，任务分割，负载均衡，同步时间，通信开销
