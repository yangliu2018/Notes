# TCP/IP详解 卷1：协议
### 网络中的数据传输单元
- packet: 包，分组，网络层，IP，信息在互联网中传输的单元
- frame: 帧，链路层，MAC
- datagram: 数据报，UDP，网络传输数据的基本单元，包含报头和数据，报头中包含数据目的地址和与其他数据的关系
- segment: 报文段，传输层，TCP
- message: 报文，APP，完整的信息，由传输层交付给应用层
---
## 第17章 TCP: 传输控制协议
### TCP连接提供可靠性的方式
- 数据分割为段
- 发送段后启动定时器，等待目的端确认，否则超时重发
- 收到数据段后发送确认
- 保持首部和数据的校验和，若有差错则不确认，等待发送端超时重发
- TCP将收到的乱序的IP数据报重新排序
- TCP丢弃重复的IP数据报
- 流量控制
### 利用TCP传输的应用层标记报文开始和结束的方式
- 使用固定长度的协议
- 在固定长度的报文头部中记录数据长度
- 用特殊的字节标识报文起止，注意需要在报文中转义特殊字符和转义符
- 使用自解释的协议，如XML
- 使用类型-长度-值协议
- 使用自实现协议，如XDR
---
- 字节流服务：TCP不在字节流中插入记录标识符，TCP提供连续的字节流服务
- TCP对字节流的内容不做任何解释，字节流由TCP连接双方的应用层解释
- TCP不区分二进制流和字符流，Unix内核不区分二进制文件和文本文件
- 字节与字符：char is byte, byte is not char, wchar is not byte
- TCP提供可靠的面向连接的字节流运输层服务
- TCP连接全双工，数据在两个方向上能同时传递
- TCP A端如何确认B端成功接收包：如果B端未成功接收包，B端会认为B端到A端的上一个包A端未成功接收（A端到B端的包会确认上一个B端到A端的包），B端超时重发上一个包